# PubMed åŒ»å­¦ç ”ç©¶ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

![AWS](https://img.shields.io/badge/AWS-CDK-orange)
![Python](https://img.shields.io/badge/Python-3.11-blue)
![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4-green)

PubMed APIã‚’ä½¿ç”¨ã—ã¦æ•—è¡€ç—‡ï¼ˆsepsisï¼‰ãŠã‚ˆã³æ€¥æ€§å‘¼å¸çª®è¿«ç—‡å€™ç¾¤ï¼ˆARDSï¼‰ã«é–¢é€£ã™ã‚‹æœ€æ–°ã®å­¦è¡“è«–æ–‡ã‚’è‡ªå‹•å–å¾—ã—ã€OpenAI GPTãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹åˆ†æã€é€±æ¬¡é‡è¦è«–æ–‡ãƒ¬ãƒãƒ¼ãƒˆä½œæˆã€æ—¥æœ¬èªç¿»è¨³ã¾ã§ã‚’è¡Œã†ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã™ã€‚AWSã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ã€å®Œå…¨è‡ªå‹•åŒ–ã•ã‚ŒãŸåŒ»å­¦æ–‡çŒ®å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ“‹ ç‰¹å¾´

- **è¤‡æ•°ç–¾æ‚£ã®è«–æ–‡åé›†**: PubMedã‹ã‚‰sepsisã¨ARDSã®è«–æ–‡ã‚’ç‹¬ç«‹ã—ã¦è‡ªå‹•å–å¾—
- **ç–¾æ‚£åˆ¥ãƒ‡ãƒ¼ã‚¿ç®¡ç†**: å„ç–¾æ‚£ã®è«–æ–‡ã‚’å€‹åˆ¥ã«ç®¡ç†ã—ã€æ¤œç´¢ã‹ã‚‰åˆ†æã¾ã§åˆ¥ã€…ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§å‡¦ç†
- **è‡ªå‹•è«–æ–‡åé›†**: PubMedã‹ã‚‰æœ€æ–°è«–æ–‡ã‚’æ¯æ—¥è‡ªå‹•å–å¾—
- **AIåˆ†æ**: OpenAI GPTã‚’ä½¿ç”¨ã—ãŸè«–æ–‡ã®é‡è¦åº¦è©•ä¾¡ã¨è¦ç´„
- **æ—¥æœ¬èªç¿»è¨³**: åˆ†æçµæœã®è‡ªå‹•æ—¥æœ¬èªç¿»è¨³
- **é€±æ¬¡é‡è¦è«–æ–‡åˆ†æ**: é€±ã”ã¨ã«æœ€ã‚‚é‡è¦ãªè«–æ–‡ã‚’é¸å®šã—ã€è©³ç´°ãªåˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆ
- **AWSã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹**: EventBridgeã€Lambdaã€S3ã€Step Functionsã«ã‚ˆã‚‹å …ç‰¢ãªæ§‹æˆ

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EventBridge          â”‚â”€â”€â”€>â”‚  Fetch      â”‚â”€â”€â”€>â”‚    S3       â”‚â”€â”€â”€>â”‚  Step       â”‚
â”‚  (sepsis/ARDSæ¯æ—¥å®Ÿè¡Œ)â”‚    â”‚  Lambda     â”‚    â”‚  Bucket     â”‚    â”‚  Functions  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                                           â”‚
                                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                     â”‚                     â”‚                 â”‚
                                               â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                               â”‚  åˆ†æ     â”‚         â”‚  ç¿»è¨³     â”‚     â”‚  æˆåŠŸ/å¤±æ•— â”‚
                                               â”‚  Lambda   â”‚â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  Lambda   â”‚â”€â”€â”€â”€>â”‚  çŠ¶æ…‹     â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EventBridge             â”‚
â”‚ (sepsis/ARDSé€±æ¬¡å®Ÿè¡Œ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€±æ¬¡åˆ†æ    â”‚           â”‚             â”‚
â”‚  Lambda      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    S3       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  Bucket     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
project/
â”œâ”€â”€ .env                     # ç’°å¢ƒå¤‰æ•°è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ app.py                   # CDKã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ lambda/                  # è«–æ–‡å–å¾—ç”¨Lambda
â”‚   â””â”€â”€ lambda_function.py   # PubMed APIã‹ã‚‰ã®è«–æ–‡å–å¾—æ©Ÿèƒ½
â”œâ”€â”€ analyze_lambda/          # è«–æ–‡åˆ†æç”¨Lambda
â”‚   â””â”€â”€ analyze_function.py  # GPTã«ã‚ˆã‚‹è«–æ–‡åˆ†ææ©Ÿèƒ½
â”œâ”€â”€ translate_lambda/        # æ—¥æœ¬èªç¿»è¨³ç”¨Lambda
â”‚   â””â”€â”€ translate_function.py# åˆ†æçµæœã®æ—¥æœ¬èªç¿»è¨³
â”œâ”€â”€ weekly_analyze_lambda/   # é€±æ¬¡åˆ†æç”¨Lambda
â”‚   â””â”€â”€ weekly_analyze_function.py # é€±æ¬¡é‡è¦è«–æ–‡ã®é¸å®šãƒ»åˆ†æ
â”œâ”€â”€ layers/                  # Lambda Layers
â”‚   â””â”€â”€ openai/              # OpenAI APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”œâ”€â”€ pubmed_search/           # CDKã‚¹ã‚¿ãƒƒã‚¯å®šç¾©
â”‚   â””â”€â”€ pubmed_search_stack.py # ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆå®šç¾©
â”œâ”€â”€ tests/                   # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”‚   â””â”€â”€ unit/               
â”‚       â””â”€â”€ test_pubmed_search_stack.py
â”œâ”€â”€ create-layer.sh          # OpenAIãƒ¬ã‚¤ãƒ¤ãƒ¼ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ README.md
```

## ğŸ’¡ ä¸»è¦æ©Ÿèƒ½ã®è©³ç´°

### 1. è¤‡æ•°ç–¾æ‚£ã®è«–æ–‡å–å¾—æ©Ÿèƒ½ (`lambda_function.py`)
- PubMed APIã‚’ä½¿ç”¨ã—ã¦æ•—è¡€ç—‡ãŠã‚ˆã³ARDSé–¢é€£ã®æœ€æ–°è«–æ–‡ã‚’ç‹¬ç«‹ã—ã¦æ¤œç´¢
- å‰æ—¥åˆ†ã®è«–æ–‡ã‚’è‡ªå‹•å–å¾—
- ç–¾æ‚£åã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«å«ã‚ã€å„ç–¾æ‚£ã®ãƒ‡ãƒ¼ã‚¿ã‚’å€‹åˆ¥ã«ç®¡ç†
- è«–æ–‡ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ã‚¢ãƒ–ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã‚’ä¿å­˜

### 2. è«–æ–‡åˆ†ææ©Ÿèƒ½ (`analyze_function.py`)
- é«˜ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã®è«–æ–‡ã‚’å„ªå…ˆã—ã¦é¸å®š
- å„è«–æ–‡ã®é‡è¦æ€§ã€è¦ç´„ã€è‡¨åºŠçš„å«æ„ã‚’åˆ†æ
- æœ€ã‚‚é‡è¦ãªè«–æ–‡ï¼ˆæœ€å¤§3ä»¶ï¼‰ã‚’é¸å®š

### 3. æ—¥æœ¬èªç¿»è¨³æ©Ÿèƒ½ (`translate_function.py`)
- åˆ†æçµæœã‚’å°‚é–€çš„ãªæ—¥æœ¬èªã«ç¿»è¨³
- åŒ»å­¦ç”¨èªã®é©åˆ‡ãªç¿»è¨³ã‚’å®Ÿæ–½
- å…ƒã®è‹±èªè¡¨ç¾ã‚‚æ‹¬å¼§å†…ã«ä¿æŒ

### 4. é€±æ¬¡é‡è¦è«–æ–‡åˆ†ææ©Ÿèƒ½ (`weekly_analyze_function.py`)
- æ¯é€±æœˆæ›œæ—¥ã«éå»1é€±é–“åˆ†ã®è«–æ–‡ã‹ã‚‰æœ€é‡è¦è«–æ–‡ã‚’é¸å®š
- ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰ç·åˆçš„ã«è©•ä¾¡ï¼š
  - è‡¨åºŠå®Ÿè·µã¸ã®å³åº§ã®å½±éŸ¿åº¦
  - ç§‘å­¦çš„æ–°è¦æ€§ã¨ç™ºè¦‹ã®é‡è¦æ€§
  - ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã®ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼
  - ç ”ç©¶ãƒ‡ã‚¶ã‚¤ãƒ³ã®è³ªï¼ˆRCTã€å¤§è¦æ¨¡ç ”ç©¶ã‚’é‡è¦–ï¼‰
  - ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æ”¹è¨‚ã®å¯èƒ½æ€§
  - åŒ»ç™‚ç¾å ´ã§ã®è­°è«–ã‚’å‘¼ã¶å¯èƒ½æ€§
- æœ€å¤§10ä»¶ã®é‡è¦è«–æ–‡ã‚’é¸å®šã—ã€è©³ç´°ãªåˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
- è«–æ–‡é–“ã®é–¢é€£æ€§ã‚‚åˆ†æ

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•

### å‰ææ¡ä»¶
- AWS CLIãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨
- AWS CDKãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨
- Python 3.11ä»¥ä¸ŠãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨
- DockerãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼ä½œæˆç”¨ï¼‰

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone <repository-url>
cd pubmed-medical-pipeline
```

### 2. ä»®æƒ³ç’°å¢ƒã®ä½œæˆã¨ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate.bat
pip install -r requirements.txt
pip install -r requirements-dev.txt  # é–‹ç™ºç”¨ä¾å­˜é–¢ä¿‚ï¼ˆãƒ†ã‚¹ãƒˆç­‰ï¼‰
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
`.env.sample`ã‚’`.env`ã«ã‚³ãƒ”ãƒ¼ã—ã¦å¿…è¦ãªå€¤ã‚’è¨­å®šã—ã¾ã™ï¼š

```bash
cp .env.sample .env
# ã‚¨ãƒ‡ã‚£ã‚¿ã§.envã‚’é–‹ã„ã¦ç·¨é›†
```

å¿…é ˆç’°å¢ƒå¤‰æ•°ï¼š
- `BUCKET_NAME`: S3ãƒã‚±ãƒƒãƒˆåï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã§ä¸€æ„ï¼‰
- `OPENAI_API_KEY`: OpenAI APIã‚­ãƒ¼
- `GPT_MODEL`: ä½¿ç”¨ã™ã‚‹GPTãƒ¢ãƒ‡ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: "gpt-4"ï¼‰
- `CDK_DEFAULT_REGION`: AWS ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: "ap-northeast-1"ï¼‰

æ³¨: æ¤œç´¢å¯¾è±¡ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯CDKã‚¹ã‚¿ãƒƒã‚¯ã§å®šç¾©ã•ã‚Œã‚‹ãŸã‚ã€ç’°å¢ƒå¤‰æ•°ã§ã®è¨­å®šã¯ä¸è¦ã«ãªã‚Šã¾ã—ãŸã€‚

### 4. OpenAIãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä½œæˆ
```bash
chmod +x create-layer.sh
./create-layer.sh
```

### 5. CDKã®ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ã¨ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
cdk bootstrap
cdk deploy
```

## ğŸ”„ å‡¦ç†ãƒ•ãƒ­ãƒ¼

1. **è«–æ–‡å–å¾—ãƒ•ãƒ­ãƒ¼ï¼ˆæ¯æ—¥å®Ÿè¡Œï¼‰**:
   - EventBridgeã«ã‚ˆã£ã¦æ¯æ—¥èµ·å‹•
     - sepsis: UTC 0:05ï¼ˆJST 9:05ï¼‰
     - ARDS: UTC 0:15ï¼ˆJST 9:15ï¼‰
   - PubMed APIã‹ã‚‰å‰æ—¥ã®å¯¾è±¡ç–¾æ‚£é–¢é€£è«–æ–‡ã‚’æ¤œç´¢ãƒ»å–å¾—
   - å–å¾—ãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã§S3ã«ä¿å­˜ï¼ˆç–¾æ‚£åã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«å«ã‚€ï¼‰
   - S3ã¸ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã‚’ãƒˆãƒªã‚¬ãƒ¼ã«Step Functionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒé–‹å§‹
   - åˆ†æLambdaãŒé‡è¦è«–æ–‡ã‚’æŠ½å‡ºãƒ»åˆ†æ
   - ç¿»è¨³LambdaãŒåˆ†æçµæœã‚’æ—¥æœ¬èªã«ç¿»è¨³
   - ã™ã¹ã¦ã®å‡¦ç†çµæœãŒS3ã«ä¿å­˜

2. **é€±æ¬¡åˆ†æãƒ•ãƒ­ãƒ¼ï¼ˆæ¯é€±æœˆæ›œå®Ÿè¡Œï¼‰**:
   - EventBridgeã«ã‚ˆã£ã¦æ¯é€±æœˆæ›œæ—¥ã«èµ·å‹•
     - sepsis: UTC 1:00ï¼ˆJST 10:00ï¼‰
     - ARDS: UTC 1:15ï¼ˆJST 10:15ï¼‰
   - éå»1é€±é–“åˆ†ã®åˆ†ææ¸ˆã¿è«–æ–‡ã‹ã‚‰æœ€é‡è¦è«–æ–‡ã‚’é¸å®š
   - è‡¨åºŠçš„å½±éŸ¿åº¦ã€ç§‘å­¦çš„æ–°è¦æ€§ã€ç ”ç©¶ã®è³ªã‚’ç·åˆè©•ä¾¡
   - åˆ†æãƒ¬ãƒãƒ¼ãƒˆãŒS3ã«ä¿å­˜ï¼ˆç–¾æ‚£åã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«å«ã‚€ï¼‰

## ğŸ“Š å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

### 1. è«–æ–‡å–å¾—çµæœ
```
pubmed_sepsis_YYYYMMDD.json
pubmed_ards_YYYYMMDD.json
```

```json
{
  "metadata": {
    "search_term": "sepsis", // ã¾ãŸã¯ "ards"
    "search_date": "2025-03-19T00:05:00Z",
    "total_articles": 15,
    "date_range": {
      "from": "2025-03-18",
      "to": "2025-03-19"
    }
  },
  "articles": {
    "12345678": {
      "pmid": "12345678",
      "title": "è«–æ–‡ã‚¿ã‚¤ãƒˆãƒ«",
      "abstract": "ã‚¢ãƒ–ã‚¹ãƒˆãƒ©ã‚¯ãƒˆå…¨æ–‡...",
      "authors": ["è‘—è€…1", "è‘—è€…2"],
      "journal": "ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«å",
      "publication_year": "2025",
      "fetch_date": "2025-03-19T00:05:30Z"
    },
    // ... ä»–ã®è«–æ–‡
  }
}
```

### 2. åˆ†æçµæœ
```
pubmed_sepsis_YYYYMMDD_analysis.json
pubmed_ards_YYYYMMDD_analysis.json
```

```json
{
  "metadata": {
    "original_file": "s3://my-pubmed-bucket/pubmed_sepsis_20250319.json",
    "analysis_date": "2025-03-19T00:10:00Z",
    "search_term": "sepsis", // ã¾ãŸã¯ "ards"
    "total_analyzed": 15,
    "total_selected": 3
  },
  "impactful_articles": [
    {
      "pmid": "12345678",
      "journal": "New England Journal of Medicine",
      "publication_year": "2025",
      "impact_reason": "é«˜ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã§ã®ç„¡ä½œç‚ºåŒ–æ¯”è¼ƒè©¦é¨“...",
      "summary": "ã“ã®ç ”ç©¶ã§ã¯...",
      "implications": "ã“ã®çµæœã¯è‡¨åºŠå®Ÿè·µã«é‡è¦ãªç¤ºå”†ã‚’ä¸ãˆã‚‹..."
    },
    // ... ä»–ã®é‡è¦è«–æ–‡ï¼ˆæœ€å¤§3ä»¶ï¼‰
  ]
}
```

### 3. æ—¥æœ¬èªç¿»è¨³çµæœ
```
pubmed_sepsis_YYYYMMDD_jp_analysis.json
pubmed_ards_YYYYMMDD_jp_analysis.json
```

```json
{
  "metadata": {
    "original_file": "s3://my-pubmed-bucket/pubmed_sepsis_20250319.json",
    "analysis_date": "2025-03-19T00:10:00Z",
    "translation_date": "2025-03-19T00:15:00Z",
    "search_term": "sepsis", // ã¾ãŸã¯ "ards"
    "total_analyzed": 15,
    "total_selected": 3,
    "original_language": "en",
    "target_language": "ja"
  },
  "impactful_articles": [
    {
      "pmid": "12345678",
      "journal": "New England Journal of Medicine",
      "publication_year": "2025",
      "impact_reason": "é«˜ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã§ã®ç„¡ä½œç‚ºåŒ–æ¯”è¼ƒè©¦é¨“...",
      "summary": "ã“ã®ç ”ç©¶ã§ã¯...",
      "implications": "ã“ã®çµæœã¯è‡¨åºŠå®Ÿè·µã«é‡è¦ãªç¤ºå”†ã‚’ä¸ãˆã‚‹..."
    },
    // ... ä»–ã®é‡è¦è«–æ–‡ï¼ˆæœ€å¤§3ä»¶ï¼‰
  ]
}
```

### 4. é€±æ¬¡é‡è¦è«–æ–‡åˆ†æçµæœ
```
weekly_analysis_sepsis_YYYYMMDD.json
weekly_analysis_ards_YYYYMMDD.json
```

```json
{
  "metadata": {
    "generated_date": "2025-03-24T01:00:00Z",
    "period_start": "2025-03-17",
    "period_end": "2025-03-24",
    "search_term": "sepsis", // ã¾ãŸã¯ "ards"
    "files_analyzed": 7,
    "total_articles_reviewed": 21,
    "articles_selected": 8,
    "report_type": "weekly_important_articles"
  },
  "weekly_highlights": {
    "summary": "ä»Šé€±ã¯21ä»¶ã®è«–æ–‡ã‹ã‚‰8ä»¶ã®é‡è¦è«–æ–‡ã‚’é¸å®šã—ã¾ã—ãŸã€‚",
    "top_journals": ["NEJM", "Lancet", "JAMA"],
    "key_topics": []
  },
  "important_articles": [
    {
      "pmid": "12345678",
      "journal": "New England Journal of Medicine",
      "publication_year": "2025",
      "title": "è«–æ–‡ã‚¿ã‚¤ãƒˆãƒ«",
      "weekly_importance_reason": "ä»Šé€±ã®é‡è¦è«–æ–‡ã¨ã—ã¦é¸å®šã—ãŸç†ç”±",
      "key_findings": "ä¸»è¦ãªç™ºè¦‹ï¼ˆç®‡æ¡æ›¸ãã§3-5ç‚¹ï¼‰",
      "clinical_impact": "è‡¨åºŠå®Ÿè·µã¸ã®å½±éŸ¿",
      "future_implications": "ä»Šå¾Œã®ç ”ç©¶ãƒ»å®Ÿè·µã¸ã®ç¤ºå”†",
      "discussion_points": "è­°è«–ã™ã¹ããƒã‚¤ãƒ³ãƒˆ",
      "related_articles": ["é–¢é€£ã™ã‚‹ä»–ã®è«–æ–‡ã®PMID"]
    },
    // ... ä»–ã®é‡è¦è«–æ–‡ï¼ˆæœ€å¤§10ä»¶ï¼‰
  ]
}
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
pytest tests/
```

### CDKã‚¹ã‚¿ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
```bash
cdk synth  # CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç”Ÿæˆ
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

1. **ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¨ãƒ©ãƒ¼**
   - ãƒã‚±ãƒƒãƒˆåãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã§ä¸€æ„ã®ãƒã‚±ãƒƒãƒˆåã‚’æŒ‡å®šã—ã¦ãã ã•ã„
   - AWSèªè¨¼æƒ…å ±ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª: `aws configure`

2. **Lambdaå®Ÿè¡Œã‚¨ãƒ©ãƒ¼**
   - CloudWatchãƒ­ã‚°ã§ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ç¢ºèª
   - OpenAI APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - Lambdaé–¢æ•°ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã‚’ç¢ºèªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 300ç§’ï¼‰

3. **OpenAIãƒ¬ã‚¤ãƒ¤ãƒ¼ä½œæˆã‚¨ãƒ©ãƒ¼**
   - DockerãŒç¨¼åƒã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - ååˆ†ãªãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

4. **GitHubã®.gitignoreåæ˜ å•é¡Œ**
   - æ—¢ã«ã‚³ãƒŸãƒƒãƒˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’.gitignoreã«è¿½åŠ ã—ãŸå ´åˆ:
     ```bash
     git rm -r --cached .
     git add .
     git commit -m "Apply new .gitignore rules"
     git push
     ```

## ğŸ“ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### æ–°ãŸãªç–¾æ‚£ã®è¿½åŠ 
`pubmed_search_stack.py`ã«æ–°ã—ã„ç–¾æ‚£ç”¨ã®EventBridgeãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ï¼š

```python
# æ–°ç–¾æ‚£ç”¨ã®EventBridgeãƒ«ãƒ¼ãƒ«ï¼ˆæ¯æ—¥å®Ÿè¡Œï¼‰
new_disease_rule = events.Rule(
    self,
    "DailyNewDiseaseSearchRule",
    schedule=events.Schedule.cron(
        minute="25",  # æ™‚é–“ã‚’ãšã‚‰ã™
        hour="0",  # UTC 0:25
    ),
)

# æ–°ç–¾æ‚£ç”¨ã®ãƒ«ãƒ¼ãƒ«ã«Lambdaé–¢æ•°ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã—ã¦è¿½åŠ 
new_disease_rule.add_target(targets.LambdaFunction(
    fetch_lambda,
    event=events.RuleTargetInput.from_object({"search_term": "new_disease_name"})
))

# é€±æ¬¡åˆ†æç”¨EventBridgeãƒ«ãƒ¼ãƒ«ï¼ˆæ–°ç–¾æ‚£ç”¨ï¼‰
weekly_new_disease_rule = events.Rule(
    self,
    "WeeklyNewDiseaseAnalysisRule",
    schedule=events.Schedule.cron(
        minute="30",  # æ™‚é–“ã‚’ãšã‚‰ã™
        hour="1",
        week_day="MON",
    ),
)

# æ–°ç–¾æ‚£ç”¨ã®ãƒ«ãƒ¼ãƒ«ã«Lambdaé–¢æ•°ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã—ã¦è¿½åŠ 
weekly_new_disease_rule.add_target(
    targets.LambdaFunction(
        weekly_analyze_lambda,
        event=events.RuleTargetInput.from_object({"search_term": "new_disease_name"})
    )
)
```

### é€±æ¬¡åˆ†æã®è©•ä¾¡åŸºæº–ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
`weekly_analyze_lambda/weekly_analyze_function.py`å†…ã®`create_weekly_analysis_prompt`é–¢æ•°ã‚’ç·¨é›†ã—ã¦ã€è©•ä¾¡åŸºæº–ã‚’èª¿æ•´ã§ãã¾ã™ã€‚

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ¤ è²¢çŒ®

ãƒã‚°å ±å‘Šã‚„æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Issueãƒˆãƒ©ãƒƒã‚«ãƒ¼ã«æå‡ºã—ã¦ãã ã•ã„ã€‚ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚‚æ­“è¿ã—ã¾ã™ã€‚

---

é–‹ç™ºãƒ»é‹ç”¨ã«é–¢ã™ã‚‹ã”è³ªå•ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è€…ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚